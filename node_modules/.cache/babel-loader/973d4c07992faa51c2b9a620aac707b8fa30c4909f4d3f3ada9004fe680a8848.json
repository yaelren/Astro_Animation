{"ast":null,"code":"var _jsxFileName = \"/Users/yaelre/Documents/Repos/AstroDemo/src/ChatMock.js\",\n  _s = $RefreshSig$();\n// ChatMock.js\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STARTER = [{\n  id: 1,\n  role: \"assistant\",\n  text: \"Hey! I‚Äôm Astro. Ask me anything ‚ú®\"\n}, {\n  id: 2,\n  role: \"assistant\",\n  text: \"Tip: say 'publish', 'undo', 'small', or 'loader'.\"\n}];\nexport default function ChatMock(_ref) {\n  _s();\n  let {\n    onSend,\n    onAssistantSpot,\n    onAssistantDone\n  } = _ref;\n  const [messages, setMessages] = useState(STARTER);\n  const [input, setInput] = useState(\"\");\n  const [pending, setPending] = useState(false);\n  const listRef = useRef(null);\n  const composerRef = useRef(null);\n  useEffect(() => {\n    var _listRef$current;\n    (_listRef$current = listRef.current) === null || _listRef$current === void 0 ? void 0 : _listRef$current.scrollTo({\n      top: listRef.current.scrollHeight,\n      behavior: \"smooth\"\n    });\n  }, [messages, pending]);\n  const send = async () => {\n    const trimmed = input.trim();\n    if (!trimmed || pending) return;\n\n    // push user message\n    const userMsg = {\n      id: Date.now(),\n      role: \"user\",\n      text: trimmed\n    };\n    setMessages(m => [...m, userMsg]);\n    setInput(\"\");\n    onSend === null || onSend === void 0 ? void 0 : onSend(trimmed);\n\n    // show typing\n    setPending(true);\n\n    // next frame: measure the typing placeholder (assistant spot)\n    requestAnimationFrame(() => {\n      var _listRef$current2, _typing$getBoundingCl;\n      const typing = (_listRef$current2 = listRef.current) === null || _listRef$current2 === void 0 ? void 0 : _listRef$current2.querySelector(\".bubble.assistant .typing\");\n      const rect = typing === null || typing === void 0 ? void 0 : (_typing$getBoundingCl = typing.getBoundingClientRect) === null || _typing$getBoundingCl === void 0 ? void 0 : _typing$getBoundingCl.call(typing);\n      onAssistantSpot === null || onAssistantSpot === void 0 ? void 0 : onAssistantSpot(rect);\n    });\n\n    // fake assistant wait\n    await new Promise(r => setTimeout(r, 550));\n\n    // render assistant message\n    const reply = mockReply(trimmed);\n    const newMsg = {\n      id: Date.now() + 1,\n      role: \"assistant\",\n      text: reply\n    };\n    setMessages(m => [...m, newMsg]);\n    setPending(false);\n\n    // after it paints, return Astro to composer\n    requestAnimationFrame(() => {\n      var _composerRef$current, _composerRef$current$;\n      const rect = (_composerRef$current = composerRef.current) === null || _composerRef$current === void 0 ? void 0 : (_composerRef$current$ = _composerRef$current.getBoundingClientRect) === null || _composerRef$current$ === void 0 ? void 0 : _composerRef$current$.call(_composerRef$current);\n      onAssistantDone === null || onAssistantDone === void 0 ? void 0 : onAssistantDone(rect);\n    });\n  };\n  const onKeyDown = e => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      send();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-list\",\n      ref: listRef,\n      children: [messages.map(m => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bubble \".concat(m.role),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bubble-inner\",\n          children: m.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this)\n      }, m.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)), pending && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bubble assistant\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bubble-inner typing\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"dot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"dot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 44\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"dot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 73\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"composer\",\n      ref: composerRef,\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyDown: onKeyDown,\n        placeholder: \"Message Astro\\u2026\",\n        rows: 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: send,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatMock, \"WfsNZqlhQLcOxOuteCEwPL+eXPQ=\");\n_c = ChatMock;\nfunction mockReply(text) {\n  const t = text.toLowerCase();\n  if (t.includes(\"publish\")) return \"Published! üöÄ\";\n  if (t.includes(\"undo\")) return \"Rolled back. ‚Ü©Ô∏è\";\n  if (t.includes(\"small\")) return \"Going small‚Ä¶ ü´ß\";\n  if (t.includes(\"load\")) return \"Loading sequence‚Ä¶ ‚è≥\";\n  return \"Toggled scale. What next?\";\n}\nvar _c;\n$RefreshReg$(_c, \"ChatMock\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","STARTER","id","role","text","ChatMock","_ref","_s","onSend","onAssistantSpot","onAssistantDone","messages","setMessages","input","setInput","pending","setPending","listRef","composerRef","_listRef$current","current","scrollTo","top","scrollHeight","behavior","send","trimmed","trim","userMsg","Date","now","m","requestAnimationFrame","_listRef$current2","_typing$getBoundingCl","typing","querySelector","rect","getBoundingClientRect","call","Promise","r","setTimeout","reply","mockReply","newMsg","_composerRef$current","_composerRef$current$","onKeyDown","e","key","shiftKey","preventDefault","className","children","ref","map","concat","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","placeholder","rows","onClick","_c","t","toLowerCase","includes","$RefreshReg$"],"sources":["/Users/yaelre/Documents/Repos/AstroDemo/src/ChatMock.js"],"sourcesContent":["// ChatMock.js\nimport React, { useState, useRef, useEffect } from \"react\";\n\nconst STARTER = [\n  { id: 1, role: \"assistant\", text: \"Hey! I‚Äôm Astro. Ask me anything ‚ú®\" },\n  { id: 2, role: \"assistant\", text: \"Tip: say 'publish', 'undo', 'small', or 'loader'.\" },\n];\n\nexport default function ChatMock({ onSend, onAssistantSpot, onAssistantDone }) {\n  const [messages, setMessages] = useState(STARTER);\n  const [input, setInput] = useState(\"\");\n  const [pending, setPending] = useState(false);\n\n  const listRef = useRef(null);\n  const composerRef = useRef(null);\n\n  useEffect(() => {\n    listRef.current?.scrollTo({ top: listRef.current.scrollHeight, behavior: \"smooth\" });\n  }, [messages, pending]);\n\n  const send = async () => {\n    const trimmed = input.trim();\n    if (!trimmed || pending) return;\n\n    // push user message\n    const userMsg = { id: Date.now(), role: \"user\", text: trimmed };\n    setMessages((m) => [...m, userMsg]);\n    setInput(\"\");\n    onSend?.(trimmed);\n\n    // show typing\n    setPending(true);\n\n    // next frame: measure the typing placeholder (assistant spot)\n    requestAnimationFrame(() => {\n      const typing = listRef.current?.querySelector(\".bubble.assistant .typing\");\n      const rect = typing?.getBoundingClientRect?.();\n      onAssistantSpot?.(rect);\n    });\n\n    // fake assistant wait\n    await new Promise((r) => setTimeout(r, 550));\n\n    // render assistant message\n    const reply = mockReply(trimmed);\n    const newMsg = { id: Date.now() + 1, role: \"assistant\", text: reply };\n    setMessages((m) => [...m, newMsg]);\n    setPending(false);\n\n    // after it paints, return Astro to composer\n    requestAnimationFrame(() => {\n      const rect = composerRef.current?.getBoundingClientRect?.();\n      onAssistantDone?.(rect);\n    });\n  };\n\n  const onKeyDown = (e) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      send();\n    }\n  };\n\n  return (\n    <div className=\"chat\">\n      <div className=\"chat-list\" ref={listRef}>\n        {messages.map((m) => (\n          <div key={m.id} className={`bubble ${m.role}`}>\n            <div className=\"bubble-inner\">{m.text}</div>\n          </div>\n        ))}\n        {pending && (\n          <div className=\"bubble assistant\">\n            <div className=\"bubble-inner typing\">\n              <span className=\"dot\"></span><span className=\"dot\"></span><span className=\"dot\"></span>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <div className=\"composer\" ref={composerRef}>\n        <textarea\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          onKeyDown={onKeyDown}\n          placeholder=\"Message Astro‚Ä¶\"\n          rows={1}\n        />\n        <button onClick={send}>Send</button>\n      </div>\n    </div>\n  );\n}\n\nfunction mockReply(text) {\n  const t = text.toLowerCase();\n  if (t.includes(\"publish\")) return \"Published! üöÄ\";\n  if (t.includes(\"undo\")) return \"Rolled back. ‚Ü©Ô∏è\";\n  if (t.includes(\"small\")) return \"Going small‚Ä¶ ü´ß\";\n  if (t.includes(\"load\")) return \"Loading sequence‚Ä¶ ‚è≥\";\n  return \"Toggled scale. What next?\";\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}